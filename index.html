<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    input {
      display: block;
      width: 100%;
    }
    
    #divcenter {
      margin: auto;
      width: 50%;
    }
  </style>
</head>

<body>
  <h1>Location</h1>
  <div id="divcenter">
    Type: <input type="text" id="type"> Name: <input type="text" id="name"> Continent: <input type="text" id="continent">    Country: <input type="text" id="country"> Area: <input type="text" id="area"> City: <input type="text" id="city"> Link:
    <input type="text" id="link"> Info: <input type="text" id="info"> Image: <input type="text" id="image"> Source:
    <input
      type="text" id="source">
      <hr/> View: <input type="text" id="view"> Alternate: <input type="text" id="alternate">
      <hr/> Landmark: <input type="checkbox" id="landmark"> Indoor: <input type="checkbox" id="indoor"> Alternate indoor:
      <input
        type="checkbox" id="aindoor">
        <button id="button">Submit</button>
  </div>

  <hr />

  <h1>Country</h1>
  <div id="divcenter">
    Name: <input type="text" id="name2"> Country: <input type="text" id="country2"> Link: <input type="text" id="link2">    Info: <input type="text" id="info2"> Image: <input type="text" id="image2"> Source: <input type="text" id="source2">
    <button id="button2">Submit</button>
  </div>

  <hr />

  <h1>Category</h1>
  <div id="divcenter">
    Name: <input type="text" id="name3"> Image: <input type="text" id="image3">
    <button id="button3">Submit</button>
  </div>

  <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>

  <script>
            $("#button").click(function() {

                var view1 = $("#view").val();
                var myRegex = /\/@(.*?)t\//g;
                var match = myRegex.exec(view1);
                var viewVals = match[1].split(',');

                var view2 = $("#alternate").val();

                if (view2 !== '') {
                    myRegex.lastIndex = 0;
                    var match2 = myRegex.exec(view2);
                    var view2Vals = match2[1].split(',');

                    var alternate = {
                        lat: parseFloat(view2Vals[0]),
                        lng: parseFloat(view2Vals[1]),
                        heading: parseFloat(view2Vals[4]),
                        pitch: Math.round((parseFloat(view2Vals[5]) - 80)*100)/100,
                        zoom: 0,
                        indoor: $("#aindoor").is(":checked")
                    };
                } else {
                    var alternate = {};
                }
                
                var view = {
                    lat: parseFloat(viewVals[0]),
                    lng: parseFloat(viewVals[1]),
                    heading: parseFloat(viewVals[4]),
                    pitch: Math.round((parseFloat(viewVals[5]) - 80)*100)/100,
                    zoom: 0,
                    indoor: $("#indoor").is(":checked")
                };

                var myData = {
                    type: $("#type").val(),
                    landmark: $("#landmark").is(":checked"),
                    name: $("#name").val(),
                    location: {
                        continent: $("#continent").val(),
                        country: $("#country").val(),
                        area: $("#area").val(),
                        city: $("#city").val()
                    },
                    data: {
                        info: $("#info").val(),
                        link: $("#link").val(),
                        image: $("#image").val(),
                        source: $("#source").val()
                    },
                    view,
                    alternate,
                    users: {
                        popularity: 0,
                        comments: [],
                        userCreated: false
                    }
                };

                $.ajax({
                    url: 'https://streetviewtourist.com/api/street_view/locations/add_location',
                    type: 'POST',
                    data: JSON.stringify(myData),
                    dataType: 'json',
                    success: function(result) {
                        console.log('Result: - Add Location', result);
                    },
                    error: function(e) {
                        console.log('Error! - Add Location', e);
                    }            
                });
            });

            $("#button2").click(function() {
                var myData2 = {
                    name: $("#name2").val(),
                    location: {
                        country: $("#country2").val(),
                    },
                    data: {
                        info: $("#info2").val(),
                        link: $("#link2").val(),
                        image: $("#image2").val(),
                        source: $("#source2").val()
                    },
                    users: {
                        popularity: 0,
                        comments: []
                    }
                };

                $.ajax({
                    url: 'https://streetviewtourist.com/api/street_view/countries/add_country',
                    type: 'POST',
                    data: JSON.stringify(myData2),
                    dataType: 'json',
                    success: function(result) {
                        console.log('Result: - Add Country', result);
                    },
                    error: function(e) {
                        console.log('Error! - Add Country', e);
                    }            
                });
            });

            $("#button3").click(function() {
                var myData3 = {
                    name: $("#name3").val(),
                    data: {
                        image: $("#image3").val(),
                        source: $("#source3").val()
                    }
                };

                $.ajax({
                    url: 'https://streetviewtourist.com/api/street_view/categories/add_category',
                    type: 'POST',
                    data: JSON.stringify(myData3),
                    dataType: 'json',
                    success: function(result) {
                        console.log('Result: - Add Category', result);
                    },
                    error: function(e) {
                        console.log('Error! - Add Category', e);
                    }            
                });
            });
        </script>

</body>

</html>